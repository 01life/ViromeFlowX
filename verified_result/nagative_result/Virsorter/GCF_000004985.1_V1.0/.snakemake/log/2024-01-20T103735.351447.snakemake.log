Job counts:
	count	jobs
	1	all
	1	check_point_for_reclassify
	1	circular_linear_split
	1	classify
	2	classify_by_group
	2	classify_full_and_part_by_group
	1	combine_linear_circular
	2	combine_linear_circular_by_group
	1	extract_feature
	1	extract_provirus_seqs
	1	finalize
	1	gff_feature
	2	gff_feature_by_group
	2	hmm_features_by_group
	1	hmm_sort_to_best_hit_taxon
	2	hmm_sort_to_best_hit_taxon_by_group
	1	merge_classification
	1	merge_full_and_part_classification
	2	merge_hmm_gff_features_by_group
	2	merge_provirus_call_by_group_by_split
	1	merge_provirus_call_from_groups
	5	merge_split_hmmtbl
	10	merge_split_hmmtbl_by_group
	10	merge_split_hmmtbl_by_group_tmp
	1	pick_viral_fullseq
	1	preprocess
	1	split_faa
	2	split_faa_by_group
	2	split_gff_by_group
	61
[Sat Jan 20 10:40:25 2024]
Error in rule hmmsearch:
    jobid: 120
    output: iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl
    shell:
        
        Domain=Archaea
        if [ $Domain = "Viruses" ]; then
            Hmmdb=/share/database/VirSorter/db/hmm/viral/combined.hmm
        else
            Domain2=$Domain
            if [ $Domain2 = "Pfamviruses" ]; then
                Domain2=Viruses
            fi
            Hmmdb=/share/database/VirSorter/db/hmm/pfam/Pfam-A-"$Domain2".hmm
        fi

        Bname=$(basename iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split)
        To_scratch=false
        # move the heavy IO of hmmsearch in local scratch if possible
        if [ -d "/tmp" ]; then
            # not sure df or du are compatible in all linux; use "||To_scratch=false" 
            #   to prevent imcompatibility in some linux distro
            Tmp=$(mktemp -d /tmp/vs2-XXXXXXXXXXXX) && To_scratch=true || To_scratch=false
            Avail=$(df -P /tmp | awk 'END{print $4}') || To_scratch=false
            Fsize=$(du -k iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split | awk '{print $1*5}') || To_scratch=false
            if [ "$Avail" -gt "$Fsize" ] && [ "$To_scratch" = "true" ]; then
                cp iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split $Tmp/$Bname || To_scratch=false
            else
                To_scratch=false
            fi
        fi

        hmmsearch -h | grep '^# HMMER' > iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl.log
        if [ "$To_scratch" = false ]; then
            # local scratch not set or not enough space in local scratch
            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl --cpu 2 --noali $Hmmdb iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl.log || { echo "See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl.log" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }
        else
            # when To_scratch is true, Tmp and Bname should have been defined successfully
            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl --cpu 2 --noali $Hmmdb $Tmp/$Bname > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl.log || { echo "See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl.log" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }

            rm -f $Tmp/$Bname && rmdir $Tmp
        fi
        rm -f iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Archaea.splithmmtbl.log
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sat Jan 20 10:40:25 2024]
Error in rule hmmsearch:
    jobid: 126
    output: iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl
    shell:
        
        Domain=Mixed
        if [ $Domain = "Viruses" ]; then
            Hmmdb=/share/database/VirSorter/db/hmm/viral/combined.hmm
        else
            Domain2=$Domain
            if [ $Domain2 = "Pfamviruses" ]; then
                Domain2=Viruses
            fi
            Hmmdb=/share/database/VirSorter/db/hmm/pfam/Pfam-A-"$Domain2".hmm
        fi

        Bname=$(basename iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split)
        To_scratch=false
        # move the heavy IO of hmmsearch in local scratch if possible
        if [ -d "/tmp" ]; then
            # not sure df or du are compatible in all linux; use "||To_scratch=false" 
            #   to prevent imcompatibility in some linux distro
            Tmp=$(mktemp -d /tmp/vs2-XXXXXXXXXXXX) && To_scratch=true || To_scratch=false
            Avail=$(df -P /tmp | awk 'END{print $4}') || To_scratch=false
            Fsize=$(du -k iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split | awk '{print $1*5}') || To_scratch=false
            if [ "$Avail" -gt "$Fsize" ] && [ "$To_scratch" = "true" ]; then
                cp iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split $Tmp/$Bname || To_scratch=false
            else
                To_scratch=false
            fi
        fi

        hmmsearch -h | grep '^# HMMER' > iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl.log
        if [ "$To_scratch" = false ]; then
            # local scratch not set or not enough space in local scratch
            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl --cpu 2 --noali $Hmmdb iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl.log || { echo "See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl.log" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }
        else
            # when To_scratch is true, Tmp and Bname should have been defined successfully
            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl --cpu 2 --noali $Hmmdb $Tmp/$Bname > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl.log || { echo "See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl.log" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }

            rm -f $Tmp/$Bname && rmdir $Tmp
        fi
        rm -f iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Mixed.splithmmtbl.log
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sat Jan 20 10:40:25 2024]
Error in rule hmmsearch:
    jobid: 124
    output: iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl
    shell:
        
        Domain=Eukaryota
        if [ $Domain = "Viruses" ]; then
            Hmmdb=/share/database/VirSorter/db/hmm/viral/combined.hmm
        else
            Domain2=$Domain
            if [ $Domain2 = "Pfamviruses" ]; then
                Domain2=Viruses
            fi
            Hmmdb=/share/database/VirSorter/db/hmm/pfam/Pfam-A-"$Domain2".hmm
        fi

        Bname=$(basename iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split)
        To_scratch=false
        # move the heavy IO of hmmsearch in local scratch if possible
        if [ -d "/tmp" ]; then
            # not sure df or du are compatible in all linux; use "||To_scratch=false" 
            #   to prevent imcompatibility in some linux distro
            Tmp=$(mktemp -d /tmp/vs2-XXXXXXXXXXXX) && To_scratch=true || To_scratch=false
            Avail=$(df -P /tmp | awk 'END{print $4}') || To_scratch=false
            Fsize=$(du -k iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split | awk '{print $1*5}') || To_scratch=false
            if [ "$Avail" -gt "$Fsize" ] && [ "$To_scratch" = "true" ]; then
                cp iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split $Tmp/$Bname || To_scratch=false
            else
                To_scratch=false
            fi
        fi

        hmmsearch -h | grep '^# HMMER' > iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl.log
        if [ "$To_scratch" = false ]; then
            # local scratch not set or not enough space in local scratch
            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl --cpu 2 --noali $Hmmdb iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl.log || { echo "See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl.log" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }
        else
            # when To_scratch is true, Tmp and Bname should have been defined successfully
            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl --cpu 2 --noali $Hmmdb $Tmp/$Bname > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl.log || { echo "See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl.log" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }

            rm -f $Tmp/$Bname && rmdir $Tmp
        fi
        rm -f iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.0.split.Eukaryota.splithmmtbl.log
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Exiting because a job execution failed. Look above for error message
