{"version": null, "code": "gASVAAkAAAAAAAAoQxJ0AGQBfA58EWQCjQMBAGQAUwCUKIwFaW5wdXSUjAZvdXRwdXSUjAZwYXJhbXOUjAl3aWxkY2FyZHOUjAd0aHJlYWRzlIwJcmVzb3VyY2VzlIwDbG9nlIwHdmVyc2lvbpSMBHJ1bGWUjAljb25kYV9lbnaUjA1jb250YWluZXJfaW1nlIwQc2luZ3VsYXJpdHlfYXJnc5SMD3VzZV9zaW5ndWxhcml0eZSMC2Vudl9tb2R1bGVzlIwMYmVuY2hfcmVjb3JklIwFam9iaWSUjAhpc19zaGVsbJSMD2JlbmNoX2l0ZXJhdGlvbpSMD2NsZWFudXBfc2NyaXB0c5SMCnNoYWRvd19kaXKUjA1lZGl0X25vdGVib29rlHSUXZQoTljEBwAACiAgICAgICAgRG9tYWluPXt3aWxkY2FyZHMuZG9tYWlufQogICAgICAgIGlmIFsgJERvbWFpbiA9ICJWaXJ1c2VzIiBdOyB0aGVuCiAgICAgICAgICAgIEhtbWRiPXtEYmRpcn0vaG1tL3ZpcmFsL2NvbWJpbmVkLmhtbQogICAgICAgIGVsc2UKICAgICAgICAgICAgRG9tYWluMj0kRG9tYWluCiAgICAgICAgICAgIGlmIFsgJERvbWFpbjIgPSAiUGZhbXZpcnVzZXMiIF07IHRoZW4KICAgICAgICAgICAgICAgIERvbWFpbjI9VmlydXNlcwogICAgICAgICAgICBmaQogICAgICAgICAgICBIbW1kYj17RGJkaXJ9L2htbS9wZmFtL1BmYW0tQS0iJERvbWFpbjIiLmhtbQogICAgICAgIGZpCgogICAgICAgIEJuYW1lPSQoYmFzZW5hbWUge2lucHV0fSkKICAgICAgICBUb19zY3JhdGNoPWZhbHNlCiAgICAgICAgIyBtb3ZlIHRoZSBoZWF2eSBJTyBvZiBobW1zZWFyY2ggaW4gbG9jYWwgc2NyYXRjaCBpZiBwb3NzaWJsZQogICAgICAgIGlmIFsgLWQgIntMb2NhbF9zY3JhdGNofSIgXTsgdGhlbgogICAgICAgICAgICAjIG5vdCBzdXJlIGRmIG9yIGR1IGFyZSBjb21wYXRpYmxlIGluIGFsbCBsaW51eDsgdXNlICJ8fFRvX3NjcmF0Y2g9ZmFsc2UiIAogICAgICAgICAgICAjICAgdG8gcHJldmVudCBpbWNvbXBhdGliaWxpdHkgaW4gc29tZSBsaW51eCBkaXN0cm8KICAgICAgICAgICAgVG1wPSQobWt0ZW1wIC1kIHtMb2NhbF9zY3JhdGNofS92czItWFhYWFhYWFhYWFhYKSAmJiBUb19zY3JhdGNoPXRydWUgfHwgVG9fc2NyYXRjaD1mYWxzZQogICAgICAgICAgICBBdmFpbD0kKGRmIC1QIHtMb2NhbF9zY3JhdGNofSB8IGF3ayAnRU5Ee3twcmludCAkNH19JykgfHwgVG9fc2NyYXRjaD1mYWxzZQogICAgICAgICAgICBGc2l6ZT0kKGR1IC1rIHtpbnB1dH0gfCBhd2sgJ3t7cHJpbnQgJDEqNX19JykgfHwgVG9fc2NyYXRjaD1mYWxzZQogICAgICAgICAgICBpZiBbICIkQXZhaWwiIC1ndCAiJEZzaXplIiBdICYmIFsgIiRUb19zY3JhdGNoIiA9ICJ0cnVlIiBdOyB0aGVuCiAgICAgICAgICAgICAgICBjcCB7aW5wdXR9ICRUbXAvJEJuYW1lIHx8IFRvX3NjcmF0Y2g9ZmFsc2UKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgVG9fc2NyYXRjaD1mYWxzZQogICAgICAgICAgICBmaQogICAgICAgIGZpCgogICAgICAgIGhtbXNlYXJjaCAtaCB8IGdyZXAgJ14jIEhNTUVSJyA+IHtvdXRwdXR9LmxvZwogICAgICAgIGlmIFsgIiRUb19zY3JhdGNoIiA9IGZhbHNlIF07IHRoZW4KICAgICAgICAgICAgIyBsb2NhbCBzY3JhdGNoIG5vdCBzZXQgb3Igbm90IGVub3VnaCBzcGFjZSBpbiBsb2NhbCBzY3JhdGNoCiAgICAgICAgICAgIGhtbXNlYXJjaCAtVCB7SG1tc2VhcmNoX3Njb3JlX21pbn0gLS10YmxvdXQge291dHB1dH0gLS1jcHUge3RocmVhZHN9IC0tbm9hbGkgJEhtbWRiIHtpbnB1dH0gPiAvZGV2L251bGwgMj4+IHtvdXRwdXR9LmxvZyB8fCB7eyBlY2hvICJTZWUgZXJyb3IgZGV0YWlscyBpbiB7V2tkaXJ9L3tvdXRwdXR9LmxvZyIgfCBweXRob24ge1NjcmlwdGRpcn0vZWNoby5weSAtLWxldmVsIGVycm9yOyBleGl0IDE7IH19CiAgICAgICAgZWxzZQogICAgICAgICAgICAjIHdoZW4gVG9fc2NyYXRjaCBpcyB0cnVlLCBUbXAgYW5kIEJuYW1lIHNob3VsZCBoYXZlIGJlZW4gZGVmaW5lZCBzdWNjZXNzZnVsbHkKICAgICAgICAgICAgaG1tc2VhcmNoIC1UIHtIbW1zZWFyY2hfc2NvcmVfbWlufSAtLXRibG91dCB7b3V0cHV0fSAtLWNwdSB7dGhyZWFkc30gLS1ub2FsaSAkSG1tZGIgJFRtcC8kQm5hbWUgPiAvZGV2L251bGwgMj4+IHtvdXRwdXR9LmxvZyB8fCB7eyBlY2hvICJTZWUgZXJyb3IgZGV0YWlscyBpbiB7V2tkaXJ9L3tvdXRwdXR9LmxvZyIgfCBweXRob24ge1NjcmlwdGRpcn0vZWNoby5weSAtLWxldmVsIGVycm9yOyBleGl0IDE7IH19CgogICAgICAgICAgICBybSAtZiAkVG1wLyRCbmFtZSAmJiBybWRpciAkVG1wCiAgICAgICAgZmkKICAgICAgICBybSAtZiB7b3V0cHV0fS5sb2cKICAgICAgICCUaA9oEoaUZYwFc2hlbGyUhZR0lC4=", "rule": "hmmsearch", "input": ["iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split"], "log": [], "params": [], "shellcmd": "\n        Domain=Bacteria\n        if [ $Domain = \"Viruses\" ]; then\n            Hmmdb=/share/database/VirSorter/db/hmm/viral/combined.hmm\n        else\n            Domain2=$Domain\n            if [ $Domain2 = \"Pfamviruses\" ]; then\n                Domain2=Viruses\n            fi\n            Hmmdb=/share/database/VirSorter/db/hmm/pfam/Pfam-A-\"$Domain2\".hmm\n        fi\n\n        Bname=$(basename iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split)\n        To_scratch=false\n        # move the heavy IO of hmmsearch in local scratch if possible\n        if [ -d \"/tmp\" ]; then\n            # not sure df or du are compatible in all linux; use \"||To_scratch=false\" \n            #   to prevent imcompatibility in some linux distro\n            Tmp=$(mktemp -d /tmp/vs2-XXXXXXXXXXXX) && To_scratch=true || To_scratch=false\n            Avail=$(df -P /tmp | awk 'END{print $4}') || To_scratch=false\n            Fsize=$(du -k iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split | awk '{print $1*5}') || To_scratch=false\n            if [ \"$Avail\" -gt \"$Fsize\" ] && [ \"$To_scratch\" = \"true\" ]; then\n                cp iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split $Tmp/$Bname || To_scratch=false\n            else\n                To_scratch=false\n            fi\n        fi\n\n        hmmsearch -h | grep '^# HMMER' > iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl.log\n        if [ \"$To_scratch\" = false ]; then\n            # local scratch not set or not enough space in local scratch\n            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl --cpu 2 --noali $Hmmdb iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl.log || { echo \"See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl.log\" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }\n        else\n            # when To_scratch is true, Tmp and Bname should have been defined successfully\n            hmmsearch -T 30 --tblout iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl --cpu 2 --noali $Hmmdb $Tmp/$Bname > /dev/null 2>> iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl.log || { echo \"See error details in /aimigene/lianglifeng/01.Project/08.virus/reRun/virsorter/GCF_000004985.1_V1.0/iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl.log\" | python /share/app/miniconda3/envs/virome/lib/python3.8/site-packages/virsorter/./scripts/echo.py --level error; exit 1; }\n\n            rm -f $Tmp/$Bname && rmdir $Tmp\n        fi\n        rm -f iter-0/all.pdg.faa.splitdir/all.pdg.faa.ss.1.split.Bacteria.splithmmtbl.log\n        ", "incomplete": false, "starttime": 1705718424.2422175, "endtime": 1705718503.235447, "job_hash": 8751717836884, "conda_env": null, "container_img_url": null}